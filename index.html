<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HEXA | Heritage Private Match</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://t1.kakaocdn.net/kakao_js_sdk/2.7.1/kakao.min.js" integrity="sha384-kDljxUXHaJ9xAb2AzRd59KkkjCEpZFrC5IeYZhlxHG1e449Z9hCXc1b9+oXh8xXh" crossorigin="anonymous"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@700&family=Noto+Serif+KR:wght@400;700&family=Pretendard:wght@300;500;700&display=swap');
        
        :root {
            --h-orange: #F37021; --h-brown: #403126; --h-cream: #F9F7F2;
        }

        body { font-family: 'Noto Serif KR', serif; background-color: #EEECE6; color: var(--h-brown); }
        .font-eng { font-family: 'Cinzel', serif; }
        .font-sans { font-family: 'Pretendard', sans-serif; }

        .luxury-card {
            background-color: #fff;
            border: 1px solid #E5E5E5;
            box-shadow: 0 20px 60px -10px rgba(64, 49, 38, 0.15);
            max-width: 480px; width: 100%; min-height: 100vh;
            display: flex; flex-direction: column; position: relative;
        }

        .btn-option {
            background: #fff; border: 1px solid #E5E5E5; transition: all 0.2s ease;
        }
        .btn-option:hover {
            border-color: var(--h-orange); background-color: #FFF8F3; transform: translateY(-2px);
        }
        
        .btn-primary {
            background-color: var(--h-orange); color: white; transition: all 0.3s;
        }
        .btn-primary:hover {
            background-color: #D95D15; box-shadow: 0 8px 20px rgba(243, 112, 33, 0.3);
        }

        .fade-in { animation: fadeIn 0.5s ease-out forwards; opacity: 0; transform: translateY(10px); }
        @keyframes fadeIn { to { opacity: 1; transform: translateY(0); } }

        .progress-bar { height: 4px; background-color: var(--h-orange); width: 0%; transition: width 0.3s ease; }

        /* ì‹¤ì‹œê°„ í‹°ì»¤ (í›„í‚¹ ìš”ì†Œ) */
        .ticker-wrap {
            width: 100%; overflow: hidden; background-color: #2c2520; color: #dcdcdc;
            font-family: 'Pretendard'; font-size: 10px; padding: 8px 0; z-index: 50;
        }
        .ticker { display: flex; animation: ticker 25s linear infinite; white-space: nowrap; }
        .ticker-item { margin-right: 40px; display: flex; align-items: center; gap: 4px; }
        @keyframes ticker { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }

        /* ë¸”ëŸ¬ íš¨ê³¼ (ê³µìœ  ìœ ë„) */
        .blur-content { filter: blur(6px); user-select: none; pointer-events: none; }
    </style>
</head>
<body class="flex items-center justify-center">

    <div class="luxury-card overflow-hidden">
        
        <div class="ticker-wrap">
            <div class="ticker">
                <div class="ticker-item"><span class="text-[#F37021]">ğŸ”¥</span> ê°•ë‚¨êµ¬ 30ëŒ€ ì „ë¬¸ì§ ë‚¨ì„± ë§¤ì¹­ ëŒ€ê¸° ë“±ë¡</div>
                <div class="ticker-item"><span class="text-[#F37021]">ğŸ’</span> ì„œì´ˆêµ¬ 20ëŒ€ ì—¬ì„± íŒŒí‹° ì‹ ì²­ ì™„ë£Œ</div>
                <div class="ticker-item"><span class="text-[#F37021]">ğŸ””</span> íŒêµ 30ëŒ€ ì‚¬ì—…ê°€ ë‚¨ì„± í”„ë¡œí•„ ì—´ëŒ ì¤‘</div>
                <div class="ticker-item"><span class="text-[#F37021]">ğŸ’Œ</span> ì†¡íŒŒêµ¬ 20ëŒ€ ì—¬ì„± ë§¤ì¹­ ì„±ê³µ</div>
                <div class="ticker-item"><span class="text-[#F37021]">ğŸ”¥</span> ìš©ì‚°êµ¬ 30ëŒ€ ì—¬ì„± ë§¤ì¹­ ëŒ€ê¸° ë“±ë¡</div>
            </div>
        </div>

        <div id="progress-container" class="w-full bg-gray-100 hidden">
            <div id="progress-bar" class="progress-bar"></div>
        </div>

        <div id="view-intro" class="flex-1 flex flex-col items-center justify-center p-8 text-center relative">
            
            <div class="mb-8">
                <h1 class="font-eng text-5xl font-bold tracking-widest text-[#403126] mb-2">HEXA</h1>
                <p class="text-[10px] font-sans tracking-[0.4em] text-[#C2A676] uppercase">Premium Heritage Match</p>
            </div>
            
            <div class="w-28 h-28 mb-6 flex items-center justify-center bg-[#F9F7F2] rounded-full border border-[#E5E5E5] text-6xl shadow-sm">
                ğŸ¦Š
            </div>

            <h2 class="text-xl font-bold mb-4 leading-relaxed text-[#403126]">
                ì™„ë²½í•œ ì¡°ê±´ì—<br>
                <span class="text-[#F37021] border-b-2 border-[#F37021]">ì„¼ìŠ¤</span>ë¥¼ ë”í•˜ë‹¤.
            </h2>
            
            <p class="font-sans text-xs text-gray-500 leading-7 mb-10 font-light">
                ë³´ì—¬ì§€ëŠ” <strong>ìœ¡ê°í˜• ìŠ¤í™</strong>ë¶€í„°<br>
                ìˆ¨ê²¨ì§„ <strong>ë§¤ë ¥ ì§€ìˆ˜</strong>ê¹Œì§€.<br>
                ë‹¹ì‹ ì˜ ê°€ì¹˜ë¥¼ ì¦ëª…í•˜ì„¸ìš”.
            </p>
            
            <div class="w-full space-y-3 font-sans px-4">
                <div class="flex gap-3">
                    <button onclick="startTest('male')" class="flex-1 py-4 border border-gray-300 hover:border-[#F37021] hover:text-[#F37021] transition text-xs tracking-widest font-bold bg-white rounded shadow-sm">GENTLEMAN</button>
                    <button onclick="startTest('female')" class="flex-1 py-4 border border-gray-300 hover:border-[#F37021] hover:text-[#F37021] transition text-xs tracking-widest font-bold bg-white rounded shadow-sm">LADY</button>
                </div>
            </div>
        </div>

        <div id="view-quiz" class="hidden flex-1 flex flex-col p-8 bg-white overflow-y-auto">
            <div class="flex-1 flex flex-col justify-center py-4">
                <div class="mb-6 flex items-center gap-2">
                    <span id="q-icon" class="text-2xl"></span>
                    <span id="q-category" class="font-eng text-xs font-bold text-[#F37021] tracking-widest border-b border-[#F37021] pb-1 uppercase">CATEGORY</span>
                </div>
                
                <h2 id="q-text" class="text-xl font-bold text-[#403126] mb-10 leading-snug break-keep fade-in">
                    ì§ˆë¬¸ ë‚´ìš©
                </h2>
                
                <div id="q-options" class="space-y-3 font-sans w-full"></div>
            </div>
        </div>

        <div id="view-loading" class="hidden flex-1 flex flex-col items-center justify-center p-8 text-center bg-[#F37021] text-white">
            <div class="w-20 h-20 bg-white/20 rounded-full flex items-center justify-center mb-6 animate-pulse text-4xl">
                âš–ï¸
            </div>
            <h3 class="font-eng text-2xl font-bold mb-2 tracking-widest">ANALYZING</h3>
            <p class="text-xs text-white/80 font-sans tracking-wider">Hexagon Data Processing...</p>
        </div>

        <div id="view-result" class="hidden flex-1 overflow-y-auto bg-[#F9F7F2] pb-10 custom-scrollbar">
            
            <div class="bg-white p-10 pb-8 text-center relative border-b border-[#E5E5E5]">
                <div class="absolute top-0 left-0 w-full h-1 bg-[#F37021]"></div>
                <p class="font-eng text-[10px] text-gray-400 tracking-[0.3em] uppercase mb-6">Your Heritage Identity</p>
                
                <div class="text-6xl mb-4" id="result-emoji">ğŸ¦</div>

                <h2 id="result-persona" class="text-2xl font-black text-[#403126] mb-1 leading-tight break-keep">ì²­ë‹´ë™<br>í”„ë¦¬íŒ¨ìŠ¤ìƒ</h2>
                <p id="result-tags" class="font-sans text-xs text-[#F37021] font-bold tracking-wider mb-6">#ìƒìœ„1% #ìœ¡ê°í˜•ì™„ì„± #ê·€ì¡±</p>
                
                <div class="relative w-52 h-52 mx-auto">
                    <canvas id="hexagonChart"></canvas>
                </div>
            </div>

            <div class="p-6 space-y-4">
                
                <div class="bg-white p-5 rounded-xl border border-[#E5E5E5] shadow-sm flex justify-between items-center">
                    <div>
                        <p class="text-xs text-gray-400 mb-1">ğŸ’ ìœ¡ê°í˜• ìŠ¤í™ ì§€ìˆ˜</p>
                        <p class="font-eng text-3xl font-bold text-[#403126]"><span id="hex-score">85</span><span class="text-sm text-gray-300 font-normal ml-1">/ 100</span></p>
                    </div>
                    <div class="text-right">
                        <span id="hex-percent" class="text-xs font-bold text-[#F37021] bg-[#FFF8F3] px-2 py-1 rounded">TOP 5%</span>
                    </div>
                </div>

                <div class="bg-[#403126] p-5 rounded-xl shadow-md text-white flex justify-between items-center relative overflow-hidden">
                    <div class="absolute right-[-10px] top-[-10px] text-7xl opacity-10">ğŸ”¥</div>
                    <div class="relative z-10">
                        <p class="text-xs text-[#F37021] mb-1 font-bold">ğŸ”¥ íˆë“  ë§¤ë ¥ ì§€ìˆ˜</p>
                        <p class="font-eng text-3xl font-bold text-white"><span id="charm-score">92</span><span class="text-sm text-white/50 font-normal ml-1">/ 100</span></p>
                    </div>
                    <div class="relative z-10 text-right max-w-[55%]">
                        <p class="text-[10px] text-gray-300 leading-tight break-keep">ìœ„ê¸° ëŒ€ì²˜ ëŠ¥ë ¥ê³¼ ì„¼ìŠ¤ê°€ íƒì›”í•˜ì—¬ ê²°í˜¼ ì„ í˜¸ë„ 1ìˆœìœ„ì…ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div class="px-6 mb-4">
                <div class="bg-white border border-[#E5E5E5] rounded-xl p-6 text-center relative overflow-hidden shadow-sm">
                    <h3 class="font-bold text-[#403126] mb-1 text-sm">í˜„ì¬ ë§¤ì¹­ ê°€ëŠ¥í•œ ì´ì„±</h3>
                    
                    <div id="lock-screen" class="my-4">
                        <div class="blur-content text-4xl font-bold text-gray-300 font-eng">1,248</div>
                        <div class="absolute inset-0 flex flex-col items-center justify-center bg-white/60 z-10">
                            <p class="text-[10px] text-gray-500 mb-2 font-sans">ê²°ê³¼ë¥¼ ê³µìœ í•˜ë©´ ìˆ«ìê°€ ê³µê°œë©ë‹ˆë‹¤</p>
                            <button onclick="unlockResult()" class="bg-[#FEE500] text-[#3b1e1e] px-4 py-2 rounded text-xs font-bold flex items-center gap-1 shadow-sm hover:shadow-md transition">
                                <span>ğŸ”’ ì¹´í†¡ ê³µìœ í•˜ê³  í™•ì¸</span>
                            </button>
                        </div>
                    </div>
                    
                    <div id="unlock-screen" class="hidden my-2">
                        <div class="text-4xl font-eng font-bold text-[#F37021] animate-bounce">127ëª…</div>
                        <p class="text-[10px] text-gray-400 mt-1">ì§€ê¸ˆ ë°”ë¡œ ë§¤ì¹­ ì‹ ì²­ì´ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div class="px-6 pb-8 space-y-3 font-sans">
                <button onclick="applyMatch()" class="w-full bg-[#F37021] text-white py-4 rounded-xl text-sm font-bold shadow-lg hover:bg-[#D95D15] flex items-center justify-center gap-2">
                    <span>ğŸ’Œ</span> ë‚´ ë“±ê¸‰ì— ë§ëŠ” ì‚¬ëŒ ì¶”ì²œë°›ê¸°
                </button>
                <button onclick="location.reload()" class="w-full py-3 text-xs text-gray-400 underline">ì²˜ìŒìœ¼ë¡œ ëŒì•„ê°€ê¸°</button>
            </div>
            
            <div class="bg-[#F9F7F2] p-4 text-center text-[9px] text-gray-400 tracking-widest">
                Â© 2025 HEXA HERITAGE CLUB
            </div>
        </div>
    </div>

    <script>
        try { Kakao.init('YOUR_KAKAO_JS_KEY_HERE'); } catch(e) {}

        let gender = 'female';
        let currentIdx = 0;
        let scores = { look:0, edu:0, job:0, asset:0, fam:0, pers:0, charm:0 };

        // â˜…â˜…â˜… 20ë¬¸í•­ ë””í…Œì¼ ì§ˆë¬¸ (ê¸°íšì•ˆ ë³µêµ¬) â˜…â˜…â˜…
        const questions = [
            // HEXAGON (ìŠ¤í™ 6ì¢…)
            { cat:"HEXAGON", icon:"ğŸ’", target:"look", q:"ë³¸ì¸ì˜ ì™¸ëª¨ ë“±ê¸‰ (ëƒ‰ì •í•˜ê²Œ)", type:"hex", opts:[{t:"ì—°ì˜ˆì¸ê¸‰ / ì–´ë”œê°€ë‚˜ ì£¼ëª©", s:10}, {t:"ìê¸°ê´€ë¦¬ ì² ì €í•œ í›ˆë‚¨/í›ˆë…€", s:8}, {t:"í˜¸ê°í˜•ì— ê¹”ë”í•œ ì¸ìƒ", s:6}, {t:"í‰ë²”í•¨", s:4}]},
            { cat:"HEXAGON", icon:"ğŸ“", target:"edu", q:"ìµœì¢… í•™ë ¥ ë° ì§€ì  ìˆ˜ì¤€", type:"hex", opts:[{t:"êµ­ë‚´ì™¸ ëª…ë¬¸ëŒ€/ì„ë°•ì‚¬", s:10}, {t:"ì¸ì„œìš¸ 4ë…„ì œ", s:8}, {t:"ì§€ë°© 4ë…„ì œ/ì „ë¬¸ëŒ€", s:6}, {t:"í•™ë ¥ ë¬´ê´€ (ì‹¤ë ¥íŒŒ)", s:5}]},
            { cat:"HEXAGON", icon:"ğŸ’¼", target:"job", q:"í˜„ì¬ ê·€í•˜ì˜ ì§ì—…ì  ìœ„ì¹˜", type:"hex", opts:[{t:"ì „ë¬¸ì§/ê³ ìˆ˜ìµ ì‚¬ì—…ê°€", s:10}, {t:"ëŒ€ê¸°ì—…/ê³µê¸°ì—…/ì•ˆì •ì  ì§êµ°", s:8}, {t:"ì„±ì¥í•˜ëŠ” ì¤‘ì†Œ/í”„ë¦¬ëœì„œ", s:6}, {t:"ì•„ì§ ì¤€ë¹„ ì¤‘/í•™ìƒ", s:4}]},
            { cat:"HEXAGON", icon:"ğŸ’°", target:"asset", q:"í˜„ì‹¤ì ì¸ ìì‚° (ë¶€ì±„ ì œì™¸)", type:"hex", opts:[{t:"ìˆœìì‚° 10ì–µ ì´ìƒ (ìê°€)", s:10}, {t:"5ì–µ ~ 10ì–µ (ê¸°ë°˜ í™•ì‹¤)", s:8}, {t:"1ì–µ ~ 5ì–µ (ì‹œë“œë¨¸ë‹ˆ)", s:6}, {t:"1ì–µ ë¯¸ë§Œ (ì‹œì‘ ë‹¨ê³„)", s:4}]},
            { cat:"HEXAGON", icon:"ğŸ ", target:"fam", q:"ì§‘ì•ˆ í™˜ê²½ (ê²°í˜¼ ì§€ì›)", type:"hex", opts:[{t:"ê²½ì œì  ì§€ì› ë„‰ë„‰í•¨ (ì—¬ìœ )", s:10}, {t:"ë…¸í›„ ì¤€ë¹„ ì™„ë£Œ & ì•½ê°„ ì§€ì›", s:8}, {t:"ê°ì ì•Œì•„ì„œ (ììˆ˜ì„±ê°€)", s:6}, {t:"ë¶€ì–‘ í•„ìš”í•  ìˆ˜ë„ ìˆìŒ", s:3}]},
            { cat:"HEXAGON", icon:"ğŸ§ ", target:"pers", q:"í‰ì†Œ ì„±ê²© (ì‚¬íšŒì„±)", type:"hex", opts:[{t:"ë¦¬ë”ì‹­ ìˆê³  ì‚¬êµì  (E)", s:9}, {t:"ì‹ ì¤‘í•˜ê³  ë°°ë ¤ì‹¬ ê¹ŠìŒ (I)", s:9}, {t:"ê°ì • ê¸°ë³µ ì‹¬í•¨ / ì˜ˆë¯¼í•¨", s:3}, {t:"ë§ˆì´ì›¨ì´ / ê³ ì§‘ ì…ˆ", s:3}]},

            // CHARM (ë§¤ë ¥ & ìœ„ê¸° & ê°€ì¹˜ê´€ 14ì¢…) - ë‡Œê°€ ì§€ë£¨í•˜ì§€ ì•Šê²Œ ì„ìŒ
            { cat:"CHARM", icon:"ğŸ¦Š", target:"charm", q:"ì†Œê°œíŒ… ì• í”„í„° ì‹ ì²­, ë‹¹ì‹ ì´ë¼ë©´?", type:"charm", opts:[{t:"\"ì£¼ë§ì— ë§›ìˆëŠ” ê±° ë¨¹ìœ¼ëŸ¬ ê°€ìš”\" (ì„¼ìŠ¤)", s:10}, {t:"\"ì‹œê°„ ë˜ì‹¤ ë•Œ ì—°ë½ì£¼ì„¸ìš”\" (ë°°ë ¤)", s:8}, {t:"\"ì € ë§ˆìŒì— ë“¤ì£ ?\" (ê·¼ìê°)", s:2}, {t:"ì—°ë½ ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦¼", s:4}]},
            { cat:"CHARM", icon:"ğŸ¦Š", target:"charm", q:"[ëŒë°œ] ì• ì¸ì´ ê¹»ìì„ ëª» ë–¼ê³  ìˆë‹¤.", type:"charm", opts:[{t:"\"ì•„íœ´ ë‹µë‹µí•´\" í•˜ë©° ë¨¹ì–´ë²„ë¦°ë‹¤ (ìœ ë¨¸)", s:10}, {t:"ë¬´ì‹¬í•˜ê²Œ ì “ê°€ë½ìœ¼ë¡œ ëˆŒëŸ¬ì¤€ë‹¤ (ì¸¤ë°ë ˆ)", s:8}, {t:"\"ë‚´ ê²ƒë„ ë–¼ì–´ì¤˜!\" (ì• êµ)", s:9}, {t:"ì‹ ê²½ ì•ˆ ì“°ê³  ë‚´ ë°¥ë§Œ ë¨¹ëŠ”ë‹¤", s:3}]},
            { cat:"CRISIS", icon:"ğŸ”¥", target:"charm", q:"[ìœ„ê¸°] ë°°ìš°ìê°€ ë¹šì„ ì¡Œë‹¤.", type:"charm", opts:[{t:"\"ì›íŒ€ì´ë‹ˆê¹Œ ê°™ì´ ê°šì\" (ë©˜íƒˆê°‘)", s:10}, {t:"\"ì´í˜¼í•´\" (ì†ì ˆ)", s:0}, {t:"\"ë‚˜ë„ ëŒ€ì¶œ ìˆì–´..\" (ë™ë³‘ìƒë ¨)", s:5}, {t:"ëƒ‰ì •í•˜ê²Œ ìì‚° ì²˜ë¶„ ê³„íšë¶€í„° ì§ ë‹¤", s:8}]},
            { cat:"CRISIS", icon:"ğŸ”¥", target:"charm", q:"[ê°ˆë“±] ëª…ì ˆ ë°©ë¬¸ ë¬¸ì œë¡œ ì‹¸ìš´ë‹¤ë©´?", type:"charm", opts:[{t:"\"ì´ë²ˆì—” ìš°ë¦¬ì§‘, ë‹¤ìŒì—” ë„ˆë„¤ì§‘\" (ê³µí‰)", s:8}, {t:"\"ê°ì ì§‘ì€ ê°ì ê°€ì\" (í•©ë¦¬)", s:7}, {t:"\"ì—¬í–‰ ê°€ìê³  í•˜ê³  ë‘˜ ë‹¤ ì•ˆ ê°„ë‹¤\" (ì§€í˜œ)", s:10}, {t:"ë¬´ì¡°ê±´ ìš°ë¦¬ ì§‘ì´ ë¨¼ì €ë‹¤", s:2}]},
            { cat:"VALUES", icon:"ğŸ•Šï¸", target:"charm", q:"ê²°í˜¼ ìƒí™œì˜ í•µì‹¬ì€?", type:"charm", opts:[{t:"ì„œë¡œì˜ ë¶€ì¡±í•¨ì„ ì±„ì›Œì£¼ëŠ” íŒ€ì›Œí¬", s:10}, {t:"ê²½ì œì  í’ìš”ì™€ ì•ˆë½í•¨", s:6}, {t:"ëœ¨ê±°ìš´ ì‚¬ë‘ê³¼ ë‚­ë§Œ", s:7}, {t:"ê°ìì˜ ì¸ìƒ ì¡´ì¤‘ (í„°ì¹˜ ì•ˆ í•¨)", s:5}]},
            { cat:"CRISIS", icon:"ğŸ”¥", target:"charm", q:"[ìœ¡ì•„] ë”©í¬ í•©ì˜í–ˆëŠ”ë° ì•„ì´ê°€ ìƒê²¼ë‹¤.", type:"charm", opts:[{t:"í•˜ëŠ˜ì˜ ëœ»ì´ë‹ˆ ë‚³ì•„ì„œ ê¸°ë¥¸ë‹¤", s:9}, {t:"ì•½ì†ëŒ€ë¡œ ë‚³ì§€ ì•ŠëŠ”ë‹¤", s:5}, {t:"ì¶©ë¶„íˆ ëŒ€í™” í›„ ê²°ì •í•œë‹¤", s:10}, {t:"ì„œë¡œ íƒ“í•˜ë©° ì‹¸ìš´ë‹¤", s:0}]},
            { cat:"CHARM", icon:"ğŸ¦Š", target:"charm", q:"ì£¼ë§ ë°ì´íŠ¸, ê°‘ìê¸° ë¹„ê°€ ìŸì•„ì§„ë‹¤.", type:"charm", opts:[{t:"\"ì•„ ì§œì¦ë‚˜.. ì§‘ ê°ˆê¹Œ?\" (ë¶ˆí‰)", s:2}, {t:"\"ë¹„ ì˜¤ë‹ˆê¹Œ íŒŒì „ ë¨¹ìœ¼ëŸ¬ ê°€ì!\" (ê¸ì •)", s:10}, {t:"ê°€ê¹Œìš´ ì‹¤ë‚´ ëª°ë¡œ ë¹ ë¥´ê²Œ ì´ë™ (ëŒ€ì²˜)", s:8}, {t:"ìš°ì‚° ì‚¬ëŸ¬ ë›°ì–´ê°”ë‹¤ ì˜¨ë‹¤ (í¬ìƒ)", s:9}]},
            { cat:"CHARM", icon:"ğŸ¦Š", target:"charm", q:"ìƒëŒ€ë°©ì˜ ìœ ë¨¸ê°€ ì¬ë¯¸ì—†ì„ ë•Œ", type:"charm", opts:[{t:"ì •ìƒ‰í•˜ë©° \"ê·¸ê²Œ ì¬ë°Œì–´?\"", s:2}, {t:"ì¼ë‹¨ ì›ƒì–´ì¤€ë‹¤ (ë°°ë ¤)", s:8}, {t:"ë” ì¬ë¯¸ìˆëŠ” ë“œë¦½ìœ¼ë¡œ ë°›ì•„ì¹œë‹¤ (í‹°í‚¤íƒ€ì¹´)", s:10}, {t:"ë¬´ì‹œí•˜ê³  ë”´ì²­ í”¼ìš´ë‹¤", s:1}]},
            { cat:"CRISIS", icon:"ğŸ”¥", target:"charm", q:"[ìŠµê´€] ë°°ìš°ìê°€ ì–‘ë§ì„ ìê¾¸ ë’¤ì§‘ì–´ ë†“ëŠ”ë‹¤.", type:"charm", opts:[{t:"ì”ì†Œë¦¬ í­ê²©í•œë‹¤", s:4}, {t:"ë§ì—†ì´ ë‚´ê°€ ì¤ëŠ”ë‹¤ (í¬ê¸°)", s:6}, {t:"\"í•œ ë²ˆë§Œ ë” ì´ëŸ¬ë©´ ì…ì— ë„£ëŠ”ë‹¤\" (ìœ ë¨¸ê²½ê³ )", s:10}, {t:"ë˜‘ê°™ì´ ë¹¨ë˜ ì•ˆ í•´ì¤€ë‹¤ (ëˆˆëˆˆì´ì´)", s:3}]},
            { cat:"CRISIS", icon:"ğŸ”¥", target:"charm", q:"[ì‹¤ì§] ë°°ìš°ìê°€ ê°‘ìê¸° íšŒì‚¬ë¥¼ ê·¸ë§Œë’€ë‹¤.", type:"charm", opts:[{t:"\"ë‹¹ì¥ ë‚˜ê°€ì„œ ì•Œë°”ë¼ë„ í•´!\" (ì••ë°•)", s:3}, {t:"\"ì¢€ ì‰¬ì–´. ë‚´ê°€ ë²Œë©´ ë¼\" (ëŠ¥ë ¥)", s:10}, {t:"ì´ì§ ì¤€ë¹„ ê¸°ê°„ì„ ì •í•´ì¤€ë‹¤ (í˜„ì‹¤)", s:8}, {t:"ê°™ì´ í‡´ì‚¬í•˜ê³  ì—¬í–‰ ê°„ë‹¤ (ìšœë¡œ)", s:5}]},
            { cat:"VALUES", icon:"ğŸ•Šï¸", target:"charm", q:"ì´ìƒì ì¸ ì£¼ë§ í’ê²½ì€?", type:"hex", opts:[{t:"ê°ì ì·¨ë¯¸ ìƒí™œ ì¡´ì¤‘", s:5}, {t:"í•¨ê»˜ ìš”ë¦¬í•˜ê³  ì²­ì†Œí•˜ê¸°", s:5}, {t:"êµì™¸ë¡œ ë“œë¼ì´ë¸Œ/ì—¬í–‰", s:5}, {t:"ì§‘ì—ì„œ ë’¹êµ´ê±°ë¦¬ë©° íœ´ì‹", s:5}]},
            { cat:"VALUES", icon:"ğŸ•Šï¸", target:"charm", q:"ì ˆëŒ€ ìš©ë‚©í•  ìˆ˜ ì—†ëŠ” ë°°ìš°ìëŠ”?", type:"hex", opts:[{t:"ëŒ€í™”ê°€ ì•ˆ í†µí•˜ëŠ” ì‚¬ëŒ", s:5}, {t:"ê²½ì œì ìœ¼ë¡œ ë¬´ëŠ¥ë ¥í•œ ì‚¬ëŒ", s:5}, {t:"ì´ì„± ë¬¸ì œ ë³µì¡í•œ ì‚¬ëŒ", s:5}, {t:"í­ë ¥ì ì¸ ì„±í–¥", s:5}]},
            { cat:"VALUES", icon:"ğŸ•Šï¸", target:"charm", q:"ì›í•˜ëŠ” ê²°í˜¼ ì‹œê¸°ëŠ”?", type:"hex", opts:[{t:"1ë…„ ë‚´ (í™•ì‹ ì´ ë“¤ë©´)", s:5}, {t:"2~3ë…„ ë‚´ (ì¤€ë¹„ í›„)", s:5}, {t:"ì •í•´ë‘ì§€ ì•ŠìŒ (ì¸ì—° ë‹¿ìœ¼ë©´)", s:5}, {t:"ë¹„í˜¼ë„ ê³ ë ¤ ì¤‘", s:0}]}
        ];

        function startTest(g) {
            gender = g;
            document.getElementById('view-intro').classList.add('hidden');
            document.getElementById('view-quiz').classList.remove('hidden');
            document.getElementById('progress-container').classList.remove('hidden');
            renderQ();
        }

        function renderQ() {
            if(currentIdx >= questions.length) { showLoading(); return; }
            
            const q = questions[currentIdx];
            document.getElementById('q-category').innerText = q.cat;
            document.getElementById('q-icon').innerText = q.icon;
            document.getElementById('q-text').innerText = q.q;
            
            // ì• ë‹ˆë©”ì´ì…˜
            const textEl = document.getElementById('q-text');
            textEl.classList.remove('fade-in');
            void textEl.offsetWidth;
            textEl.classList.add('fade-in');

            // ì§„í–‰ë°”
            const progress = ((currentIdx) / questions.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;

            const container = document.getElementById('q-options');
            container.innerHTML = '';

            q.opts.forEach((opt, idx) => {
                const btn = document.createElement('button');
                btn.className = "btn-option w-full p-5 text-left rounded-xl text-sm font-sans text-gray-700 fade-in group";
                btn.style.animationDelay = `${idx * 0.05}s`;
                btn.innerHTML = `<span class="font-bold text-[#F37021] mr-2">${String.fromCharCode(65+idx)}.</span> <span class="group-hover:font-bold transition">${opt.t}</span>`;
                btn.onclick = () => handleAnswer(q, opt);
                container.appendChild(btn);
            });
        }

        function handleAnswer(q, opt) {
            if(q.type === 'hex' && q.target) scores[q.target] = opt.s;
            if(q.type === 'charm') scores.charm += opt.s;

            currentIdx++;
            renderQ();
        }

        function showLoading() {
            document.getElementById('view-quiz').classList.add('hidden');
            document.getElementById('progress-container').classList.add('hidden');
            document.getElementById('view-loading').classList.remove('hidden');
            setTimeout(showResult, 2000);
        }

        function showResult() {
            document.getElementById('view-loading').classList.add('hidden');
            document.getElementById('view-result').classList.remove('hidden');

            // ì ìˆ˜ ê³„ì‚° (100ì  í™˜ì‚°)
            const hexSum = scores.look + scores.edu + scores.job + scores.asset + scores.fam + scores.pers;
            const hexScore100 = Math.round((hexSum / 60) * 100);
            const charmScore100 = Math.round((scores.charm / 100) * 100); // ë¬¸í•­ìˆ˜ì— ë”°ë¼ ì¡°ì •

            // í˜ë¥´ì†Œë‚˜ (ë‹‰ë„¤ì„) ê²°ì • ë¡œì§
            let persona="", tags="", emoji="", percentStr="";
            
            if(hexScore100 >= 90) { 
                persona = "ì²­ë‹´ë™ í”„ë¦¬íŒ¨ìŠ¤ìƒ"; tags = "#ìƒìœ„1% #ìœ¡ê°í˜•ì™„ì„± #ê·€ì¡±"; emoji = "ğŸ¦"; percentStr = "TOP 1%";
            } else if(hexScore100 >= 80) { 
                persona = "íŒêµ í˜„ê¸ˆë¶€ì"; tags = "#ëŠ¥ë ¥ìº #ììˆ˜ì„±ê°€ #ì‹¤ì†íŒŒ"; emoji = "ğŸ¦…"; percentStr = "TOP 5%";
            } else if(hexScore100 >= 60) {
                if(charmScore100 >= 80) {
                    persona = "ì„±ìˆ˜ë™ í™ìŠ¤í„°"; tags = "#ë§¤ë ¥ë§Œì  #ì„¼ìŠ¤ìŸì´ #ì¸ê¸°í­ë°œ"; emoji = "ğŸ¦Š"; percentStr = "TOP 20%";
                } else {
                    persona = "ëŒ€ì¹˜ë™ ëª¨ë²”ìƒ"; tags = "#ì•ˆì •ì  #ì„±ì‹¤í•¨ #1ë“±ì‹ ë‘ê°"; emoji = "ğŸ´"; percentStr = "TOP 20%";
                }
            } else { 
                persona = "ì ì‹¤ ì•¼ë§ê°€"; tags = "#ì„±ì¥ìº #ì ì¬ë ¥ #ëŒ€ê¸°ë§Œì„±"; emoji = "ğŸ¦Œ"; percentStr = "TOP 50%";
            }

            document.getElementById('result-persona').innerText = persona;
            document.getElementById('result-tags').innerText = tags;
            document.getElementById('result-emoji').innerText = emoji;
            document.getElementById('hex-score').innerText = hexScore100;
            document.getElementById('hex-percent').innerText = percentStr;
            document.getElementById('charm-score').innerText = Math.min(100, charmScore100 + 20); // ì•½ê°„ì˜ ë³´ì •

            // ì°¨íŠ¸ ë Œë”ë§
            new Chart(document.getElementById('hexagonChart').getContext('2d'), {
                type: 'radar',
                data: {
                    labels: ['ì™¸ëª¨', 'í•™ë ¥', 'ì§ì—…', 'ìì‚°', 'ì§‘ì•ˆ', 'ì„±ê²©'],
                    datasets: [{
                        label: 'MY SPECS',
                        data: [scores.look, scores.edu, scores.job, scores.asset, scores.fam, scores.pers],
                        backgroundColor: 'rgba(243, 112, 33, 0.1)',
                        borderColor: '#F37021',
                        borderWidth: 2,
                        pointBackgroundColor: '#F37021',
                        pointBorderColor: '#fff',
                        pointRadius: 3
                    }]
                },
                options: {
                    scales: { r: { min: 0, max: 10, ticks: { display: false }, pointLabels: { font: { size: 10, family: 'Pretendard' }, color: '#403126' } } },
                    plugins: { legend: { display: false } },
                    maintainAspectRatio: false
                }
            });
        }

        // ê³µìœ  ë½ í•´ì œ
        function unlockResult() {
            try {
                Kakao.Share.sendDefault({
                    objectType: 'feed',
                    content: {
                        title: "ë‚˜ì˜ ê²°í˜¼ ê³„ê¸‰: " + document.getElementById('result-persona').innerText,
                        description: "ìƒìœ„ 1% ìœ¡ê°í˜• ì¸ì¬ ë“±ê·¹! ë‹¹ì‹ ì˜ ë“±ê¸‰ë„ í™•ì¸í•´ë³´ì„¸ìš”.",
                        imageUrl: 'https://cdn-icons-png.flaticon.com/512/616/616412.png',
                        link: { mobileWebUrl: location.href, webUrl: location.href }
                    },
                    buttons: [{ title: 'ê²°ê³¼ í™•ì¸í•˜ê¸°', link: { mobileWebUrl: location.href, webUrl: location.href } }]
                });
            } catch(e) {}
            setTimeout(() => {
                document.getElementById('lock-screen').classList.add('hidden');
                document.getElementById('unlock-screen').classList.remove('hidden');
            }, 1000);
        }

        function applyMatch() { 
            if(confirm("ëŒ€ê¸° ë¦¬ìŠ¤íŠ¸ì— ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) alert("ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹´ë‹¹ ë§¤ë‹ˆì €ê°€ ì—°ë½ë“œë¦½ë‹ˆë‹¤."); 
        }
    </script>
</body>
</html>